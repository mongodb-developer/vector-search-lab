# üëê Perform vector search queries

Now let's run some vector search queries against the `books` collection. 

Fill in any `<CODE_BLOCK_N>` placeholders and run the cells under the **Step 6: Perform vector search queries** section in the notebook to run vector search queries against your data.

The answers for code blocks in this section are as follows:

**CODE_BLOCK_6**

<details>
<summary>Answer</summary>
<div>

```python
get_embedding(user_query, mode)
```

</div>
</details>

**CODE_BLOCK_7**

<details>
<summary>Answer</summary>
<div>

```json
[
    {
        "$vectorSearch": {
            "index": ATLAS_VECTOR_SEARCH_INDEX_NAME,
            "queryVector": query_embedding,
            "path": "embedding",
            "numCandidates": 50,
            "filter": filter,
            "limit": 5,
        }
    },
    {"$project": {"_id": 0, "title": 1, "cover": 1, "year":1, "pages":1, "score": {"$meta": "vectorSearchScore"}}},
]
```

</div>
</details>

**CODE_BLOCK_8**

<details>
<summary>Answer</summary>
<div>

```python
collection.aggregate(pipeline)
```

</div>
</details>
